<!doctype html><html data-reactid=".1hsi1jc3thc" data-react-checksum="-454259518"><head data-reactid=".1hsi1jc3thc.0"><meta charset="utf-8" data-reactid=".1hsi1jc3thc.0.0"><title data-reactid=".1hsi1jc3thc.0.1">DžejEs - JavaScript pro web</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" data-reactid=".1hsi1jc3thc.0.2"><link rel="stylesheet" type="text/css" href="main-73051c71144d61d48eff.css?v=1.0.0" data-reactid=".1hsi1jc3thc.0.3"><link rel="icon" type="image/png" href="images/favicon-4b52c7e9cc28fdb9378fd1542994a946.png" data-reactid=".1hsi1jc3thc.0.4"><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" data-reactid=".1hsi1jc3thc.0.5"><link rel="canonical" href="https://www.dzejes.cz/react-jsx.html" data-reactid=".1hsi1jc3thc.0.6"><base target="_blank" data-reactid=".1hsi1jc3thc.0.7"></head><body data-reactid=".1hsi1jc3thc.1"><div data-reactid=".1hsi1jc3thc.1.0"><header class="Header" data-reactid=".1hsi1jc3thc.1.0.0"><div class="NavBar" data-reactid=".1hsi1jc3thc.1.0.0.0"><div class="NavBar-container" data-reactid=".1hsi1jc3thc.1.0.0.0.0"><div class="NavBar-item" data-reactid=".1hsi1jc3thc.1.0.0.0.0.0"><a class="NavBar-link" href="/" target="_self" data-reactid=".1hsi1jc3thc.1.0.0.0.0.0.0">Úvod</a><a class="NavBar-link" href="https://twitter.com/vmiksu" data-reactid=".1hsi1jc3thc.1.0.0.0.0.0.1">Twitter</a><a class="NavBar-link" href="https://github.com/tajo/javascript" data-reactid=".1hsi1jc3thc.1.0.0.0.0.0.2">GitHub</a><a class="NavBar-link" href="/feed.xml" data-reactid=".1hsi1jc3thc.1.0.0.0.0.0.3">RSS</a></div></div></div></header><div class="PageBody" data-reactid=".1hsi1jc3thc.1.0.1"><div class="PageBody-container" data-reactid=".1hsi1jc3thc.1.0.1.0"><div style="width:100%;" data-reactid=".1hsi1jc3thc.1.0.1.0.0"><div style="width:100%;" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$0"><h1>React - JSX<a id="react-jsx">&nbsp;</a></h1><p>První věc, která nováčka v Reactu rozhodně praští do očí, je zápis XML (HTML) tagů přímo do JavaScriptového kódu bez apostrofů kolem. Takovýto zápis se ve světě Reactu nazývá JSX a ano, není to validní JS syntax. Před spuštěním se musí do JS kompilovat. <strong>Dnes si ukážeme, co je pod pokličkou JSX a že se vlastně není čeho bát</strong>.</p>
<h2>Šablonovací systémy<a id="-ablonovac-syst-my">&nbsp;</a></h2><p>Pojem &quot;šablonovací systém&quot; vám asi není neznámý. V oblasti webů má za úkol oddělit kód (např. PHP) od popisu struktury stránky. Známé příklady jsou Latte, Smarty nebo Twig. Ve světě JavaScriptu pak <a href="https://developers.google.com/closure/templates/">Closure Templates (Soy)</a>. Šablony obsahují jeden velký řetězec plný HTML, CSS a JS + nějaké speciální zápisy (proměnné, makra...). Šablonovací systém pak pomocí regulárních výrazů naplní šablonu daty a poslepuje z ní výsledný řetězec, který může poslat do prohlížeče. Skutečný proces může být i o něco složitější, ale princip zůstává stejný - <strong>jde o slepování řetězců</strong>.</p>
<h2>DOM vs řetězce<a id="dom-vs-et-zce">&nbsp;</a></h2><p>Slepování řetězců funguje dobře na straně serveru, protože s reloadem celé stránky odpadá starost o stav stránky (například co bylo vyplněné ve formuláři) a vše se načte a spustí znova. <strong>Jenže co dělat, když chceme aktualizovat jenom malé výseky stránky pomocí DOMu?</strong> Můžeme nad upravovaným DOM elementem zavolat:</p>
<code class="codeBlock"><span class="token qualifier" >Element</span><span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> <span class="token string" >'&lt;div>Komponenta, kterou jsme aktualizovali&lt;/div>'</span><span class="token punctuation" >;</span></code><p>Problém vyřešen. Naše šablony (řetězce) můžeme takto vložit na libovolné místo DOMu a navíc je to ještě velmi rychlé. Má to ale zásadní háček.</p>
<p><strong>Pokud by naše komponenta měla na sobě pověšené listenery (například onClick), tak ty po innerHTML zmizí a musíme je opětovně navěsit.</strong> Co když bude v naší komponentě formulář a uživatel v něm bude mít zrovna něco rozepsané? Všechno mu během aktualizace zmizí. Aktualizování DOMu pomocí innerHTML je sice velmi rychlé, ale také velmi náchylné k chybám. Navíc si to přímo říká o XSS .</p>
<p>A tak vývojáři raději mění DOM postupně pomocí bezpečnějších metod typu <code>Node.appendChild()</code> či <code>Node.replaceChild()</code>. Problém vyřešen? Ne tak docela. Pěkné řetězcové šablony, kde na první pohled vidíme strukturu komponent, už nám najednou nestačí a naše zdrojáky musíme doplnit o různě dlouhé série <code>Node</code> metod, což je typické imperativní nepřehledné programování. <strong>Místo toho, abychom definovali jednotlivé stavy (podoby) našich komponent, musíme dávat dohromady sady kroků, kterými se z jednoho stavu dostaneme do druhého.</strong> Kdyby tak byla nějaká knihovna, která by tohle za nás vyřešila. Třeba React, že.</p>
<h2>Funkce místo řetězců<a id="funkce-m-sto-et-zc-">&nbsp;</a></h2><p>Definice komponent pomocí řetězců má tedy své limity. React však používá silnější nástroj - virtuální DOM (strom), který si vytvoří na základě <strong><code>render()</code> metod, které popisují strukturu komponent pomocí funkcí</strong>. Tento virtuální DOM se pak pomocí <code>appendChild</code> či <code>innerHTML</code> promítne do DOMu skutečného a dojde tak k překreslení v prohlížeči. Pokud se u některé komponenty změní props nebo state, opětovně se zavolá metoda <code>render()</code>, vznikne nový virtuální DOM, porovná se s tím s předchozím a rozdíly se nejefektivnějším možným způsobem promítnou i do DOMu skutečného.</p>
<p><strong>Jak se ale HTML dá převést na funkce?</strong> Názvy jednotlivých elementů nahradíme za názvy funkcí a z atributů (props) uděláme jeden velký argument - mapu. Vnořené elementy (děti) pak budou představovat další argumenty (mimochodem v React komponentě jsou přístupné pomocí <code>this.props.children</code>).</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>form className<span class="token operator" >=</span><span class="token string" >"nameForm"</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span> placeholder<span class="token operator" >=</span><span class="token string" >"Jméno"</span> <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span> placeholder<span class="token operator" >=</span><span class="token string" >"Příjmení"</span> <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"submit"</span> value<span class="token operator" >=</span><span class="token string" >"Poslat"</span> <span class="token operator" >/</span><span class="token operator" >></span>
<span class="token operator" >&lt;</span><span class="token operator" >/</span>form<span class="token operator" >></span></code><p>se zapíše jako:</p>
<code class="codeBlock"><span class="token function" >form<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>className<span class="token punctuation" >:</span> <span class="token string" >'nameForm'</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Jméno'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Příjmení'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'submit'</span><span class="token punctuation" >,</span> value<span class="token punctuation" >:</span> <span class="token string" >'Poslat'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >)</span></code><p><strong>A to je celá věda kolem JSX. Je to jen triviální &quot;syntax sugar&quot;, který dělá kód čitelnější</strong> a přístupnější pro lidi odkojené na HTML. Není tedy potřeba se učit nový jazyk, nová makra či nové zápisy. Stačí si vždy vzpomenout na to, že jde jen o prosté funkce. Reálný zápis je trošičku složitější:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >FormNoJSX</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >form<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>className<span class="token punctuation" >:</span> <span class="token string" >'nameForm'</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
        <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Jméno'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Příjmení'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'submit'</span><span class="token punctuation" >,</span> value<span class="token punctuation" >:</span> <span class="token string" >'Poslat'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >)</span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p>Teď už i víte, proč je vždy potřeba na začátku importovat React. Pro pořádek ještě důkaz, že to funguje:</p>
<p></div><div class="codeBlock" style="border-left:solid 5px rgba(44, 83, 158, 0.9);" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1"><form class="nameForm" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.$formNoJSX2"><input type="text" placeholder="Jméno" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.$formNoJSX2.0"><input type="text" placeholder="Příjmení" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.$formNoJSX2.1"><input type="submit" value="Poslat" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.$formNoJSX2.2"></form><div style="font-size:0.8em;bottom:0;right:0;margin:5px;position:absolute;" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.1"><a href="https://github.com/tajo/javascript/tree/master/examples/react/formNoJSX2.js" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$1.1.0">zdrojový kód</a></div></div><div style="width:100%;" data-reactid=".1hsi1jc3thc.1.0.1.0.0.$2"></p>
<p><strong>Nelíbí se vám opakované <code>React.DOM</code>?</strong> Můžeme si ho &quot;vytknout&quot; pomocí <a href="https://babeljs.io/docs/learn-es2015/#destructuring">ES6 destruktoru</a>:</p>
<code class="codeBlock"><span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

  <span class="token keyword" >const</span> <span class="token punctuation" >{</span>form<span class="token punctuation" >,</span> input<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token function" >form<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>className<span class="token punctuation" >:</span> <span class="token string" >'nameForm'</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Jméno'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Příjmení'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token function" >input<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'submit'</span><span class="token punctuation" >,</span> value<span class="token punctuation" >:</span> <span class="token string" >'Poslat'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p>A v takovém <a href="http://coffeescript.org/">CoffeeScriptu</a>, který je více expresivní než JS, by to vypadalo jako:</p>
<code class="codeBlock"><span class="token punctuation" >{</span>form<span class="token punctuation" >,</span> input<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >;</span>

render<span class="token punctuation" >:</span> <span class="token operator" >-</span><span class="token operator" >></span>
  form <span class="token punctuation" >{</span>className<span class="token punctuation" >:</span> <span class="token string" >'nameForm'</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    input <span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Jméno'</span><span class="token punctuation" >}</span>
    input <span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'text'</span><span class="token punctuation" >,</span> placeholder<span class="token punctuation" >:</span> <span class="token string" >'Příjmení'</span><span class="token punctuation" >}</span>
    input <span class="token punctuation" >{</span>type<span class="token punctuation" >:</span> <span class="token string" >'submit'</span><span class="token punctuation" >,</span> value<span class="token punctuation" >:</span> <span class="token string" >'Poslat'</span><span class="token punctuation" >}</span></code><p>Existuje dokonce i <a href="https://github.com/jsdf/coffee-react-transform">fork Coffee</a>, kde lze používat JSX.</p>
<p>Jak vidíte, je tedy čistě na vás a vašich preferencích, kterou variantu si zvolíte. <strong>Můžete spokojeně používat React i úplně bez JSX.</strong> Nicméně, drtivá většina lidí JSX s Reactem používá a tak všechny příklady najdete v něm. JSX je pevnou součástí <a href="babel.html">Babelu</a> a třeba i TypeScriptu. Dostává se mu značné podpory i co se týče nástrojů, editorů a linterů. Stává se z něho průmyslový standard.</p>
<h2>JSX syntax<a id="jsx-syntax">&nbsp;</a></h2><p>Teď když vidíte, co je výsledkem JSX transformace, tak by vám už mělo být i jasné, co všechno můžete a nemůžete zapsat do <code>{}</code>. Kód uzavřený v <code>{}</code> je jednoduše čistý JavaScript.</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token punctuation" >{</span>red<span class="token punctuation" >}</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>button<span class="token operator" >></span><span class="token punctuation" >{</span>label<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
<span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>se přeloží do</p>
<code class="codeBlock"><span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >div<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>className<span class="token punctuation" >:</span> red<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span>DOM<span class="token punctuation" >.</span><span class="token function" >button<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> label<span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code><p>Z toho je jasné, že například s</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span><span class="token block-keyword" >if</span> <span class="token punctuation" >(</span>foo<span class="token punctuation" >)</span> <span class="token punctuation" >{</span><span class="token operator" >?</span><span class="token operator" >?</span><span class="token operator" >?</span><span class="token punctuation" >}</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>byste se nikam nedostali, ale</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>foo <span class="token operator" >?</span> <span class="token string" >'ahoj'</span> <span class="token punctuation" >:</span> <span class="token string" >''</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>nebo</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>foo <span class="token operator" >&amp;&amp;</span> <span class="token string" >'ahoj'</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>fungovat bude.</p>
<p><strong>A v JavaScriptu můžete zase znova použít JSX:</strong></p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>foo <span class="token operator" >&amp;&amp;</span> <span class="token operator" >&lt;</span>button<span class="token operator" >></span><span class="token qualifier" >Ahoj</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>Velmi často v JSX uvidíte různé mapovací funkce, které vrací pole React elementů:</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>cars<span class="token punctuation" >.</span><span class="token function" >map<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> <span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>car<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>A nyní už víte opravdu všechno. Pokud jste stále trochu zmatení, zkuste si napsat pár komponent. Uvidíte, že z JSX se stane &quot;jazyk&quot;, který plně ovládnete během jednoho večera, protože si vždy velmi lehce můžete vydedukovat do čeho se kompiluje.</p>
<h2>Pár dalších věcí...<a id="p-r-dal-ch-v-c-">&nbsp;</a></h2><p>Najde se ale i pár dalších detailů, které stojí za zmínku. Občas se může stát, že <strong>chcete, aby nějaký váš vlastní atribut prošel až do výsledného DOM elementu:</strong></p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div my<span class="token operator" >-</span>attr<span class="token operator" >=</span><span class="token string" >"test"</span> <span class="token operator" >/</span><span class="token operator" >></span></code><p>Ovšem React neznámé atributy automaticky odstraní. Výjimku udělá, pokud použijete prefix <code>data-</code>:</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div data<span class="token operator" >-</span>attr<span class="token operator" >=</span><span class="token string" >"test"</span> <span class="token operator" >/</span><span class="token operator" >></span></code><p>Občas také můžete mít potřebu vložit někam &quot;natvrdo&quot; statický HTML kód, to se udělá takto:</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div dangerouslySetInnerHTML<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >{</span>__html<span class="token punctuation" >:</span> <span class="token string" >'&lt;b>Tohle se neescapuje!&lt;/b>'</span><span class="token punctuation" >}</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span></code><p>Z názvu je už zřejmé, že jde o velmi nebezpečný postup, protože escapování zůstává jen a pouze na vás. Tímto úplně vyřadíte React a obsah se do stránky vloží pomocí <code>innerHTML</code>.</p>
<h2>Chyby<a id="chyby">&nbsp;</a></h2><p>Jednou z velkých výhod definování pomocí funkcí je to, že <strong>pokud uděláte chybu, dostane se vám vždy pěkné a přesné zprávy</strong>, protože jste udělali chybu v JavaScriptovém kódu a nikoliv v nějakém řetězci, který se bude parsovat až buhví kdy.</p>
<p>Například chybějící uzavírací závorka:</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"timeago"</span>
  <span class="token operator" >&lt;</span><span class="token qualifier" >Time</span><span class="token qualifier" >Ago</span> date<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>article<span class="token punctuation" >.</span>date<span class="token punctuation" >}</span> formatter<span class="token operator" >=</span><span class="token punctuation" >{</span>formatter<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
<span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span></code><p>okamžitě vypíše tuto pěknou chybu v terminálu:</p>
<p class="pic-container">
  <img src="images/error-fe495f73edb71db0992c61ffafe1b86e.png" class="pic" title="Pěkné a přehledné chybové hlášení" />
</p>

<p>To je luxus, který se vám většinou při &quot;slepování řetězců&quot; nedostane.</p>
<p>Některé atributy se jmenují jinak kvůli kolizím s klíčovými slovy. Například toto nebude fungovat:</p>
<code class="codeBlock"><span class="token operator" >&lt;</span>div <span class="token keyword" >class</span><span class="token operator" >=</span><span class="token string" >"fooClass"</span> <span class="token operator" >/</span><span class="token operator" >></span></code><p>ale nebojte, dostane se vám ihned nápověda v konzoli:</p>
<code class="codeBlock"><span class="token qualifier" >Warning</span><span class="token punctuation" >:</span> <span class="token qualifier" >Unknown</span> DOM property <span class="token keyword" >class</span><span class="token punctuation" >.</span> <span class="token qualifier" >Did</span> you mean className<span class="token operator" >?</span></code><h2>Závěrem<a id="z-v-rem">&nbsp;</a></h2><p><strong>JSX pouze zpříjemňuje čitelnost komponent.</strong> Bude se líbit zejména kodérům. React však můžete plnohodnotně používat i zcela bez něj. <strong>Důležité je však to, co se skrývá pod ním - funkce.</strong> Funkce totiž poskytují skvělou a netušeně mocnou abstrakci pro skládání jednotlivých komponent. I po 2 letech od uvedení Reactu se tak stále objevují nové a lepší způsoby, jakými do sebe jednotlivé komponenty skládat, což si určitě ukážeme i v dalších dílech. To by nebylo možné, pokud by React a JSX nebyly pouze čistým JavaScriptem. Příště si ukážeme knihovnu <a href="https://facebook.github.io/immutable-js/">Immutable.js</a> a způsob jak díky ní 100x zrychlit už tak rychlou React aplikaci.</p>
</div></div></div></div><footer data-reactid=".1hsi1jc3thc.1.0.2"><div class="links" data-reactid=".1hsi1jc3thc.1.0.2.0"><div style="float:left;" data-reactid=".1hsi1jc3thc.1.0.2.0.0"><span data-reactid=".1hsi1jc3thc.1.0.2.0.0.0">◀</span><span data-reactid=".1hsi1jc3thc.1.0.2.0.0.1"> </span><a href="react-props-vs-state.html" target="_self" data-reactid=".1hsi1jc3thc.1.0.2.0.0.2">React - Props vs State</a></div></div><div class="Footer" data-reactid=".1hsi1jc3thc.1.0.2.1"><span data-reactid=".1hsi1jc3thc.1.0.2.1.0">Diskutujte prostřednictvím </span><a href="https://github.com/tajo/javascript/issues" data-reactid=".1hsi1jc3thc.1.0.2.1.1">issues</a><span data-reactid=".1hsi1jc3thc.1.0.2.1.2">.</span><br data-reactid=".1hsi1jc3thc.1.0.2.1.3"><span data-reactid=".1hsi1jc3thc.1.0.2.1.4">Vylepšete článek </span><a href="https://github.com/tajo/javascript/pulls" data-reactid=".1hsi1jc3thc.1.0.2.1.5">pull requestem</a><span data-reactid=".1hsi1jc3thc.1.0.2.1.6">.</span><br data-reactid=".1hsi1jc3thc.1.0.2.1.7"><span data-reactid=".1hsi1jc3thc.1.0.2.1.8">Sledujte na </span><a href="https://twitter.com/vmiksu" data-reactid=".1hsi1jc3thc.1.0.2.1.9">twitteru</a><span data-reactid=".1hsi1jc3thc.1.0.2.1.a">. </span><span data-reactid=".1hsi1jc3thc.1.0.2.1.b"> </span><a href="/feed.xml" data-reactid=".1hsi1jc3thc.1.0.2.1.c">RSS</a><span data-reactid=".1hsi1jc3thc.1.0.2.1.d">.</span><br data-reactid=".1hsi1jc3thc.1.0.2.1.e"><b data-reactid=".1hsi1jc3thc.1.0.2.1.f">Sdílejte!</b></div></footer></div><script data-reactid=".1hsi1jc3thc.1.1">window.INITIAL_PROPS = {"location":"react-jsx.html","devMode":false,"files":{"main.css":"main-73051c71144d61d48eff.css","main.js":"main-73051c71144d61d48eff.js"}};
</script><script src="main-73051c71144d61d48eff.js" data-reactid=".1hsi1jc3thc.1.2"></script><div data-reactid=".1hsi1jc3thc.1.3">
        <script>
          var host = "dzejes.cz";
          if ((host == window.location.host) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
          }

          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-63660429-1', 'auto');
          ga('send', 'pageview');
        </script>
      </div></body></html>